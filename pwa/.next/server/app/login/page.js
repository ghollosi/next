(()=>{var e={};e.id=626,e.ids=[626],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6837:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(974),s(2029),s(5866);var r=s(3191),a=s(8716),o=s(7922),n=s.n(o),i=s(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let c=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,974)),"/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/login/page.tsx"],h="/login/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3529:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},6174:()=>{},470:(e,t,s)=>{Promise.resolve().then(s.bind(s,4146))},5047:(e,t,s)=>{"use strict";var r=s(7389);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},4146:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(326),a=s(7577),o=s(5047),n=s(8069),i=s(3209);function l(){let e=(0,o.useRouter)(),[t,s]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),[d,h]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1),p=async s=>{s.preventDefault(),h(""),m(!0);try{let s=await n.h.activate(t.toUpperCase(),l);(0,i.Aj)(s.sessionId,{driverId:s.driverId,networkId:s.networkId,partnerCompanyId:s.partnerCompanyId,firstName:s.firstName,lastName:s.lastName,partnerCompanyName:s.partnerCompanyName}),e.push("/dashboard")}catch(e){h(e instanceof Error?e.message:"Login failed")}finally{m(!1)}},x=e=>{c(e.replace(/\D/g,"").slice(0,4))},g=e=>{s(e.replace(/[^A-Za-z0-9]/g,"").toUpperCase().slice(0,6))};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-primary-600 to-primary-800 flex flex-col",children:[(0,r.jsxs)("div",{className:"safe-area-top px-6 pt-12 pb-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-white rounded-2xl mx-auto mb-4 flex items-center justify-center shadow-lg",children:r.jsx("svg",{className:"w-12 h-12 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),r.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"VSys Wash"}),r.jsx("p",{className:"text-primary-200",children:"Truck Wash Management"})]}),(0,r.jsxs)("div",{className:"flex-1 bg-white rounded-t-3xl px-6 pt-8 pb-6 safe-area-bottom",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-6 text-center",children:"Driver Login"}),(0,r.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invite Code"}),r.jsx("input",{type:"text",value:t,onChange:e=>g(e.target.value),placeholder:"ABC123",className:"w-full px-4 py-4 text-2xl text-center tracking-[0.5em] font-mono border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-0 focus:outline-none uppercase",maxLength:6,autoComplete:"off",autoCapitalize:"characters"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1 text-center",children:"6-character code from your company"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PIN"}),r.jsx("input",{type:"password",inputMode:"numeric",value:l,onChange:e=>x(e.target.value),placeholder:"••••",className:"w-full px-4 py-4 text-2xl text-center tracking-[0.75em] font-mono border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-0 focus:outline-none",maxLength:4,autoComplete:"off"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1 text-center",children:"4-digit PIN"})]}),d&&r.jsx("div",{className:"bg-danger-500/10 border border-danger-500/20 rounded-xl px-4 py-3 text-danger-600 text-center",children:d}),r.jsx("button",{type:"submit",disabled:6!==t.length||4!==l.length||u,className:"w-full bg-primary-600 text-white py-4 px-6 rounded-xl text-lg font-semibold disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-primary-700 active:bg-primary-800 transition-colors touch-button",children:u?(0,r.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Logging in..."]}):"Login"})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsx("p",{className:"text-sm text-gray-500",children:"Don't have a code? Contact your dispatcher."})})]})]})}},8069:(e,t,s)=>{"use strict";s.d(t,{h:()=>o});let r=process.env.NEXT_PUBLIC_API_URL||"";class a{constructor(){this.baseUrl=r}handleSessionError(e){400===e.status||e.status}async activate(e,t){let s=await fetch(`${this.baseUrl}/pwa/activate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inviteCode:e,pin:t})});if(!s.ok)throw Error((await s.json()).message||"Activation failed");return s.json()}async getProfile(e){let t=await fetch(`${this.baseUrl}/pwa/profile`,{headers:{"x-driver-session":e}});if(!t.ok)throw Error("Failed to get profile");return t.json()}async getLocations(e){let t=await fetch(`${this.baseUrl}/pwa/locations`,{headers:{"x-driver-session":e}});if(!t.ok)throw this.handleSessionError(t),Error("Failed to get locations");return t.json()}async getLocationByCode(e,t){let s=await fetch(`${this.baseUrl}/pwa/locations/${t}`,{headers:{"x-driver-session":e}});if(!s.ok)throw Error("Location not found");return s.json()}async getServices(e,t){let s=await fetch(`${this.baseUrl}/pwa/locations/${t}/services`,{headers:{"x-driver-session":e}});if(!s.ok)throw Error("Failed to get services");let r=await s.json();return r.services||r}async createWashEvent(e,t){let s=await fetch(`${this.baseUrl}/pwa/wash-events`,{method:"POST",headers:{"Content-Type":"application/json","x-driver-session":e},body:JSON.stringify(t)});if(!s.ok)throw Error((await s.json()).message||"Failed to create wash event");return s.json()}async startWashEvent(e,t){let s=await fetch(`${this.baseUrl}/pwa/wash-events/${t}/start`,{method:"POST",headers:{"x-driver-session":e}});if(!s.ok)throw Error((await s.json()).message||"Failed to start wash");return s.json()}async completeWashEvent(e,t){let s=await fetch(`${this.baseUrl}/pwa/wash-events/${t}/complete`,{method:"POST",headers:{"x-driver-session":e}});if(!s.ok)throw Error((await s.json()).message||"Failed to complete wash");return s.json()}async getActiveWashEvent(e){let t=await fetch(`${this.baseUrl}/pwa/wash-events/active`,{headers:{"x-driver-session":e}});if(404===t.status)return null;if(!t.ok)throw Error("Failed to get active wash event");return t.json()}async getWashEvent(e,t){let s=await fetch(`${this.baseUrl}/pwa/wash-events/${t}`,{headers:{"x-driver-session":e}});if(!s.ok)throw Error((await s.json()).message||"Failed to get wash event");return s.json()}async getWashHistory(e){let t=await fetch(`${this.baseUrl}/pwa/wash-events`,{headers:{"x-driver-session":e}});if(!t.ok)throw Error("Failed to get wash history");let s=await t.json();return s.data||s}}let o=new a},3209:(e,t,s)=>{"use strict";function r(e,t){}function a(){}s.d(t,{Aj:()=>r,Ov:()=>a})},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>a,viewport:()=>o});var r=s(9510);s(5023);let a={title:"VSys Wash",description:"Truck wash management system",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:"VSys Wash"}},o={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,themeColor:"#2563eb"};function n({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"min-h-screen bg-gray-50",children:e})})}},974:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/login/page.tsx#default`)},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[819],()=>s(6837));module.exports=r})();