(()=>{var e={};e.id=564,e.ids=[564],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>d,routeModule:()=>x,tree:()=>c}),t(6598),t(2029),t(5866);var r=t(3191),a=t(8716),i=t(7922),l=t.n(i),n=t(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let c=["",{children:["wash",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6598)),"/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/wash/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2029)),"/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/wash/new/page.tsx"],h="/wash/new/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/wash/new/page",pathname:"/wash/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3529:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},6174:()=>{},1151:(e,s,t)=>{Promise.resolve().then(t.bind(t,2339))},5047:(e,s,t)=>{"use strict";var r=t(7389);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},2339:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(326),a=t(7577),i=t(5047),l=t(8069);function n(){let e=(0,i.useRouter)();(0,i.useSearchParams)().get("location");let[s,t]=(0,a.useState)(null),[n,o]=(0,a.useState)(null),[c,d]=(0,a.useState)("location"),[h,m]=(0,a.useState)([]),[x,u]=(0,a.useState)([]),[p,g]=(0,a.useState)([]),[v,y]=(0,a.useState)([]),[j,f]=(0,a.useState)(null),[b,w]=(0,a.useState)(null),[N,k]=(0,a.useState)(null),[S,P]=(0,a.useState)(null),[C,z]=(0,a.useState)(""),[$,L]=(0,a.useState)(""),[E,U]=(0,a.useState)(!1),[W,M]=(0,a.useState)(!1),[_,B]=(0,a.useState)(""),V=async(e,s)=>{let t=s||n;if(t){f(e),M(!0);try{let s=await l.h.getServices(t,e.code);u(s),d("service")}catch(e){B("Nem siker\xfclt bet\xf6lteni a szolg\xe1ltat\xe1sokat")}finally{M(!1)}}},A=e=>{w(e),d("vehicle"),p.length>0&&k(p[0])},F=async()=>{if(!n||!s||!j||!b)return;let t=E?C:N?.plateNumber,r=E?$:S?.plateNumber;if(!t?.trim()){B("V\xe1lassz vontat\xf3t vagy add meg a rendsz\xe1mot!");return}M(!0),B("");try{let s=await l.h.createWashEvent(n,{locationId:j.id,servicePackageId:b.id,tractorVehicleId:E?void 0:N?.id,tractorPlateManual:E?t.toUpperCase().trim():void 0,trailerVehicleId:E?void 0:S?.id,trailerPlateManual:E&&r?r.toUpperCase().trim():void 0});e.push(`/wash/${s.id}`)}catch(e){B(e.message||"Nem siker\xfclt l\xe9trehozni a mos\xe1st"),M(!1)}};return s?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[r.jsx("header",{className:"bg-primary-600 text-white px-4 py-4 safe-area-top",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>{"service"===c?(d("location"),f(null)):"vehicle"===c?(d("service"),w(null)):e.back()},className:"p-2 hover:bg-primary-700 rounded-lg transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-lg font-semibold",children:"\xdaj mos\xe1s"}),(0,r.jsxs)("p",{className:"text-primary-200 text-sm",children:["location"===c&&"V\xe1lassz helysz\xednt","service"===c&&"V\xe1lassz szolg\xe1ltat\xe1st","vehicle"===c&&"V\xe1lassz j\xe1rművet"]})]})]})}),(0,r.jsxs)("div",{className:"px-4 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${"location"===c?"bg-primary-600":"bg-primary-200"}`}),r.jsx("div",{className:`w-8 h-0.5 ${"location"!==c?"bg-primary-600":"bg-gray-300"}`}),r.jsx("div",{className:`w-3 h-3 rounded-full ${"service"===c?"bg-primary-600":"vehicle"===c?"bg-primary-200":"bg-gray-300"}`}),r.jsx("div",{className:`w-8 h-0.5 ${"vehicle"===c?"bg-primary-600":"bg-gray-300"}`}),r.jsx("div",{className:`w-3 h-3 rounded-full ${"vehicle"===c?"bg-primary-600":"bg-gray-300"}`})]}),(0,r.jsxs)("div",{className:"flex justify-between mt-2 text-xs text-gray-500",children:[r.jsx("span",{children:"Helysz\xedn"}),r.jsx("span",{children:"Szolg\xe1ltat\xe1s"}),r.jsx("span",{children:"J\xe1rmű"})]})]}),_&&r.jsx("div",{className:"mx-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:_}),(0,r.jsxs)("div",{className:"flex-1 px-4 pb-6 overflow-auto",children:["location"===c&&(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"V\xe1lassz mos\xf3 helysz\xednt"}),0===h.length?r.jsx("div",{className:"text-center py-8 text-gray-500",children:W?"Helysz\xednek bet\xf6lt\xe9se...":"Nincs el\xe9rhető helysz\xedn"}):h.map(e=>r.jsx("button",{onClick:()=>V(e),disabled:W,className:"w-full bg-white rounded-xl shadow-sm p-4 text-left hover:bg-gray-50 active:bg-gray-100 transition-colors disabled:opacity-50",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-6 h-6 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-gray-800",children:e.name}),r.jsx("p",{className:"text-sm text-gray-500",children:e.code}),e.city&&r.jsx("p",{className:"text-xs text-gray-400",children:e.city})]}),r.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},e.id))]}),"service"===c&&(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"V\xe1lassz szolg\xe1ltat\xe1st"}),r.jsx("div",{className:"bg-primary-50 rounded-xl p-3 mb-4",children:(0,r.jsxs)("p",{className:"text-sm text-primary-700",children:[r.jsx("span",{className:"font-medium",children:"Helysz\xedn:"})," ",j?.name]})}),0===x.length?r.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nincs el\xe9rhető szolg\xe1ltat\xe1s ezen a helysz\xednen"}):x.map(e=>r.jsx("button",{onClick:()=>A(e),className:"w-full bg-white rounded-xl shadow-sm p-4 text-left hover:bg-gray-50 active:bg-gray-100 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-gray-800",children:e.name}),r.jsx("p",{className:"text-sm text-gray-500",children:e.code}),e.description&&r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e.description})]}),r.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},e.id))]}),"vehicle"===c&&(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"V\xe1lassz j\xe1rművet"}),(0,r.jsxs)("div",{className:"bg-primary-50 rounded-xl p-3 space-y-1",children:[(0,r.jsxs)("p",{className:"text-sm text-primary-700",children:[r.jsx("span",{className:"font-medium",children:"Helysz\xedn:"})," ",j?.name]}),(0,r.jsxs)("p",{className:"text-sm text-primary-700",children:[r.jsx("span",{className:"font-medium",children:"Szolg\xe1ltat\xe1s:"})," ",b?.name]})]}),p.length>0&&(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>U(!1),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${E?"bg-gray-100 text-gray-600":"bg-primary-600 text-white"}`,children:"Saj\xe1t j\xe1rművek"}),r.jsx("button",{onClick:()=>U(!0),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${E?"bg-primary-600 text-white":"bg-gray-100 text-gray-600"}`,children:"K\xe9zi megad\xe1s"})]}),!E&&p.length>0?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Vontat\xf3 *"}),r.jsx("div",{className:"space-y-2",children:p.map(e=>r.jsx("button",{onClick:()=>k(e),className:`w-full p-3 rounded-xl border-2 text-left transition-colors ${N?.id===e.id?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${N?.id===e.id?"bg-primary-500 text-white":"bg-gray-100 text-gray-500"}`,children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-mono font-semibold text-gray-800",children:e.plateNumber}),e.plateState&&r.jsx("p",{className:"text-xs text-gray-500",children:e.plateState})]}),N?.id===e.id&&r.jsx("svg",{className:"w-5 h-5 text-primary-500 ml-auto",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]})},e.id))})]}),v.length>0&&(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"P\xf3tkocsi (opcion\xe1lis)"}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("button",{onClick:()=>P(null),className:`w-full p-3 rounded-xl border-2 text-left transition-colors ${null===S?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:r.jsx("p",{className:"text-gray-500",children:"Nincs p\xf3tkocsi"})}),v.map(e=>r.jsx("button",{onClick:()=>P(e),className:`w-full p-3 rounded-xl border-2 text-left transition-colors ${S?.id===e.id?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${S?.id===e.id?"bg-primary-500 text-white":"bg-gray-100 text-gray-500"}`,children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-mono font-semibold text-gray-800",children:e.plateNumber}),e.plateState&&r.jsx("p",{className:"text-xs text-gray-500",children:e.plateState})]}),S?.id===e.id&&r.jsx("svg",{className:"w-5 h-5 text-primary-500 ml-auto",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]})},e.id))]})]})]}):(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vontat\xf3 rendsz\xe1ma *"}),r.jsx("input",{type:"text",value:C,onChange:e=>z(e.target.value.toUpperCase()),placeholder:"ABC-123",className:"w-full px-4 py-4 text-xl text-center font-mono tracking-wider border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-4 focus:ring-primary-100 transition-all uppercase",autoCapitalize:"characters",autoComplete:"off"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"P\xf3tkocsi rendsz\xe1ma (opcion\xe1lis)"}),r.jsx("input",{type:"text",value:$,onChange:e=>L(e.target.value.toUpperCase()),placeholder:"XYZ-789",className:"w-full px-4 py-4 text-xl text-center font-mono tracking-wider border-2 border-gray-200 rounded-xl focus:border-primary-500 focus:ring-4 focus:ring-primary-100 transition-all uppercase",autoCapitalize:"characters",autoComplete:"off"})]})]}),r.jsx("button",{onClick:F,disabled:W||!E&&!N||E&&!C.trim(),className:"w-full py-4 bg-gradient-to-r from-primary-500 to-primary-700 text-white font-semibold rounded-xl shadow-lg hover:from-primary-600 hover:to-primary-800 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:W?(0,r.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"L\xe9trehoz\xe1s..."]}):"Mos\xe1s ind\xedt\xe1sa"})]})]}),r.jsx("div",{className:"safe-area-bottom"})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsx("div",{className:"text-gray-500",children:"Bet\xf6lt\xe9s..."})})}function o(){return r.jsx(a.Suspense,{fallback:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsx("div",{className:"text-gray-500",children:"Bet\xf6lt\xe9s..."})}),children:r.jsx(n,{})})}},8069:(e,s,t)=>{"use strict";t.d(s,{h:()=>i});let r=process.env.NEXT_PUBLIC_API_URL||"";class a{constructor(){this.baseUrl=r}handleSessionError(e){400===e.status||e.status}async activate(e,s){let t=await fetch(`${this.baseUrl}/pwa/activate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inviteCode:e,pin:s})});if(!t.ok)throw Error((await t.json()).message||"Activation failed");return t.json()}async getProfile(e){let s=await fetch(`${this.baseUrl}/pwa/profile`,{headers:{"x-driver-session":e}});if(!s.ok)throw Error("Failed to get profile");return s.json()}async getLocations(e){let s=await fetch(`${this.baseUrl}/pwa/locations`,{headers:{"x-driver-session":e}});if(!s.ok)throw this.handleSessionError(s),Error("Failed to get locations");return s.json()}async getLocationByCode(e,s){let t=await fetch(`${this.baseUrl}/pwa/locations/${s}`,{headers:{"x-driver-session":e}});if(!t.ok)throw Error("Location not found");return t.json()}async getServices(e,s){let t=await fetch(`${this.baseUrl}/pwa/locations/${s}/services`,{headers:{"x-driver-session":e}});if(!t.ok)throw Error("Failed to get services");let r=await t.json();return r.services||r}async createWashEvent(e,s){let t=await fetch(`${this.baseUrl}/pwa/wash-events`,{method:"POST",headers:{"Content-Type":"application/json","x-driver-session":e},body:JSON.stringify(s)});if(!t.ok)throw Error((await t.json()).message||"Failed to create wash event");return t.json()}async startWashEvent(e,s){let t=await fetch(`${this.baseUrl}/pwa/wash-events/${s}/start`,{method:"POST",headers:{"x-driver-session":e}});if(!t.ok)throw Error((await t.json()).message||"Failed to start wash");return t.json()}async completeWashEvent(e,s){let t=await fetch(`${this.baseUrl}/pwa/wash-events/${s}/complete`,{method:"POST",headers:{"x-driver-session":e}});if(!t.ok)throw Error((await t.json()).message||"Failed to complete wash");return t.json()}async getActiveWashEvent(e){let s=await fetch(`${this.baseUrl}/pwa/wash-events/active`,{headers:{"x-driver-session":e}});if(404===s.status)return null;if(!s.ok)throw Error("Failed to get active wash event");return s.json()}async getWashEvent(e,s){let t=await fetch(`${this.baseUrl}/pwa/wash-events/${s}`,{headers:{"x-driver-session":e}});if(!t.ok)throw Error((await t.json()).message||"Failed to get wash event");return t.json()}async getWashHistory(e){let s=await fetch(`${this.baseUrl}/pwa/wash-events`,{headers:{"x-driver-session":e}});if(!s.ok)throw Error("Failed to get wash history");let t=await s.json();return t.data||t}async getVehicles(e){let s=await fetch(`${this.baseUrl}/pwa/vehicles`,{headers:{"x-driver-session":e}});if(!s.ok)throw this.handleSessionError(s),Error("Failed to get vehicles");return s.json()}}let i=new a},2029:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l,metadata:()=>a,viewport:()=>i});var r=t(9510);t(5023);let a={title:"VSys Wash",description:"Truck wash management system",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:"VSys Wash"}},i={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,themeColor:"#2563eb"};function l({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"min-h-screen bg-gray-50",children:e})})}},6598:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/wash/new/page.tsx#default`)},5023:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[819],()=>t(6));module.exports=r})();