(()=>{var e={};e.id=370,e.ids=[370],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3205:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(8825),s(2029),s(5866);var r=s(3191),a=s(8716),o=s(7922),i=s.n(o),n=s(5231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let c=["",{children:["wash",{children:["history",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8825)),"/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/wash/history/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/wash/history/page.tsx"],h="/wash/history/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/wash/history/page",pathname:"/wash/history",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3529:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},6174:()=>{},3582:(e,t,s)=>{Promise.resolve().then(s.bind(s,6669))},5047:(e,t,s)=>{"use strict";var r=s(7389);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},6669:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(326),a=s(7577),o=s(5047);s(8069);let i={CREATED:{label:"Created",color:"text-yellow-700",bgColor:"bg-yellow-100"},AUTHORIZED:{label:"Authorized",color:"text-green-700",bgColor:"bg-green-100"},IN_PROGRESS:{label:"In Progress",color:"text-blue-700",bgColor:"bg-blue-100"},COMPLETED:{label:"Completed",color:"text-gray-700",bgColor:"bg-gray-100"},LOCKED:{label:"Locked",color:"text-red-700",bgColor:"bg-red-100"},REJECTED:{label:"Rejected",color:"text-red-700",bgColor:"bg-red-100"}};function n(){let e=(0,o.useRouter)(),[t,s]=(0,a.useState)(null),[n,l]=(0,a.useState)(null),[c,d]=(0,a.useState)([]),[h,u]=(0,a.useState)(!0),[m,x]=(0,a.useState)(""),p=t=>{e.push(`/wash/${t}`)},g=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=(e,t)=>{if(!e||!t)return null;let s=Math.floor((new Date(t).getTime()-new Date(e).getTime())/1e3);return`${Math.floor(s/60)}:${(s%60).toString().padStart(2,"0")}`};return t?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[r.jsx("header",{className:"bg-primary-600 text-white px-4 py-4 safe-area-top",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>{e.back()},className:"p-2 hover:bg-primary-700 rounded-lg transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-lg font-semibold",children:"Wash History"}),(0,r.jsxs)("p",{className:"text-primary-200 text-sm",children:[c.length," washes"]})]})]})}),m&&r.jsx("div",{className:"mx-4 mt-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:m}),r.jsx("div",{className:"flex-1 px-4 py-6 overflow-auto",children:h?r.jsx("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("svg",{className:"animate-spin w-8 h-8 text-primary-600",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):0===c.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Wash History"}),r.jsx("p",{className:"text-gray-500",children:"You haven't completed any washes yet."})]}):r.jsx("div",{className:"space-y-3",children:c.map(e=>{let t=i[e.status]||i.CREATED,s=w(e.startedAt,e.completedAt);return r.jsx("button",{onClick:()=>p(e.id),className:"w-full bg-white rounded-xl shadow-sm p-4 text-left hover:bg-gray-50 active:bg-gray-100 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${t.bgColor} ${t.color}`,children:t.label}),s&&r.jsx("span",{className:"text-xs text-gray-500",children:s})]}),r.jsx("p",{className:"font-medium text-gray-800",children:e.location?.name||"Unknown Location"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e.servicePackage?.name||"Service"," â€¢ ",g(e.createdAt)]}),e.tractorPlateManual&&(0,r.jsxs)("p",{className:"text-xs text-gray-400 font-mono mt-1",children:["\uD83D\uDE9B ",e.tractorPlateManual,e.trailerPlateManual&&` + ${e.trailerPlateManual}`]})]}),r.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},e.id)})})}),r.jsx("div",{className:"safe-area-bottom"})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsx("div",{className:"text-gray-500",children:"Loading..."})})}},8069:(e,t,s)=>{"use strict";s.d(t,{h:()=>o});let r=process.env.NEXT_PUBLIC_API_URL||"";class a{constructor(){this.baseUrl=r}handleSessionError(e){400===e.status||e.status}async activate(e,t){let s=await fetch(`${this.baseUrl}/pwa/activate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inviteCode:e,pin:t})});if(!s.ok)throw Error((await s.json()).message||"Activation failed");return s.json()}async getProfile(e){let t=await fetch(`${this.baseUrl}/pwa/profile`,{headers:{"x-driver-session":e}});if(!t.ok)throw Error("Failed to get profile");return t.json()}async getLocations(e){let t=await fetch(`${this.baseUrl}/pwa/locations`,{headers:{"x-driver-session":e}});if(!t.ok)throw this.handleSessionError(t),Error("Failed to get locations");return t.json()}async getLocationByCode(e,t){let s=await fetch(`${this.baseUrl}/pwa/locations/${t}`,{headers:{"x-driver-session":e}});if(!s.ok)throw Error("Location not found");return s.json()}async getServices(e,t){let s=await fetch(`${this.baseUrl}/pwa/locations/${t}/services`,{headers:{"x-driver-session":e}});if(!s.ok)throw Error("Failed to get services");let r=await s.json();return r.services||r}async createWashEvent(e,t){let s=await fetch(`${this.baseUrl}/pwa/wash-events`,{method:"POST",headers:{"Content-Type":"application/json","x-driver-session":e},body:JSON.stringify(t)});if(!s.ok)throw Error((await s.json()).message||"Failed to create wash event");return s.json()}async startWashEvent(e,t){let s=await fetch(`${this.baseUrl}/pwa/wash-events/${t}/start`,{method:"POST",headers:{"x-driver-session":e}});if(!s.ok)throw Error((await s.json()).message||"Failed to start wash");return s.json()}async completeWashEvent(e,t){let s=await fetch(`${this.baseUrl}/pwa/wash-events/${t}/complete`,{method:"POST",headers:{"x-driver-session":e}});if(!s.ok)throw Error((await s.json()).message||"Failed to complete wash");return s.json()}async getActiveWashEvent(e){let t=await fetch(`${this.baseUrl}/pwa/wash-events/active`,{headers:{"x-driver-session":e}});if(404===t.status)return null;if(!t.ok)throw Error("Failed to get active wash event");return t.json()}async getWashEvent(e,t){let s=await fetch(`${this.baseUrl}/pwa/wash-events/${t}`,{headers:{"x-driver-session":e}});if(!s.ok)throw Error((await s.json()).message||"Failed to get wash event");return s.json()}async getWashHistory(e){let t=await fetch(`${this.baseUrl}/pwa/wash-events`,{headers:{"x-driver-session":e}});if(!t.ok)throw Error("Failed to get wash history");let s=await t.json();return s.data||s}}let o=new a},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>a,viewport:()=>o});var r=s(9510);s(5023);let a={title:"VSys Wash",description:"Truck wash management system",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:"VSys Wash"}},o={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,themeColor:"#2563eb"};function i({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"min-h-screen bg-gray-50",children:e})})}},8825:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/wash/history/page.tsx#default`)},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[819],()=>s(3205));module.exports=r})();