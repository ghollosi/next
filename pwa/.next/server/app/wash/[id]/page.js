(()=>{var e={};e.id=486,e.ids=[486],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7776:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>d,routeModule:()=>x,tree:()=>c}),t(164),t(2029),t(5866);var a=t(3191),r=t(8716),n=t(7922),o=t.n(n),i=t(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(s,l);let c=["",{children:["wash",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,164)),"/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/wash/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2029)),"/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/wash/[id]/page.tsx"],h="/wash/[id]/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/wash/[id]/page",pathname:"/wash/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3529:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},6174:()=>{},2921:(e,s,t)=>{Promise.resolve().then(t.bind(t,3427))},5047:(e,s,t)=>{"use strict";var a=t(7389);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},3427:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(326),r=t(7577),n=t(5047),o=t(8069);let i={CREATED:{label:"Created",color:"text-yellow-700",bgColor:"bg-yellow-100"},AUTHORIZED:{label:"Authorized",color:"text-green-700",bgColor:"bg-green-100"},IN_PROGRESS:{label:"In Progress",color:"text-blue-700",bgColor:"bg-blue-100"},COMPLETED:{label:"Completed",color:"text-gray-700",bgColor:"bg-gray-100"},LOCKED:{label:"Locked",color:"text-red-700",bgColor:"bg-red-100"},REJECTED:{label:"Rejected",color:"text-red-700",bgColor:"bg-red-100"}};function l(){let e=(0,n.useRouter)(),s=(0,n.useParams)().id,[t,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[h,m]=(0,r.useState)(null),[x,u]=(0,r.useState)(!0),[p,g]=(0,r.useState)(!1),[f,b]=(0,r.useState)(""),[w,y]=(0,r.useState)(0);(0,r.useCallback)(async e=>{try{let t=await o.h.getWashEvent(e,s);m(t)}catch(e){b(e.message||"Failed to load wash event")}finally{u(!1)}},[s]);let j=e=>`${Math.floor(e/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`,v=async()=>{if(c){g(!0),b("");try{let e=await o.h.startWashEvent(c,s);m(e)}catch(e){b(e.message||"Failed to start wash")}finally{g(!1)}}},N=async()=>{if(c){g(!0),b("");try{let e=await o.h.completeWashEvent(c,s);m(e)}catch(e){b(e.message||"Failed to complete wash")}finally{g(!1)}}},k=()=>{e.push("/dashboard")};if(!t||x)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("svg",{className:"animate-spin w-8 h-8 text-primary-600 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a.jsx("div",{className:"text-gray-500",children:"Loading wash details..."})]})});if(!h)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center px-4",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Wash Not Found"}),a.jsx("p",{className:"text-gray-500 mb-6",children:f||"This wash event could not be found."}),a.jsx("button",{onClick:k,className:"px-6 py-3 bg-primary-600 text-white font-semibold rounded-xl",children:"Go to Dashboard"})]})});let P=i[h.status]||i.CREATED;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[a.jsx("header",{className:"bg-primary-600 text-white px-4 py-4 safe-area-top",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:k,className:"p-2 hover:bg-primary-700 rounded-lg transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-lg font-semibold",children:"Wash Details"}),(0,a.jsxs)("p",{className:"text-primary-200 text-sm",children:["#",s.slice(0,8)]})]})]})}),f&&a.jsx("div",{className:"mx-4 mt-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:f}),a.jsx("div",{className:"px-4 py-6",children:a.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("span",{className:`inline-block px-4 py-2 rounded-full text-sm font-medium ${P.bgColor} ${P.color}`,children:P.label}),"IN_PROGRESS"===h.status&&(0,a.jsxs)("div",{className:"mt-6",children:[a.jsx("div",{className:"text-5xl font-mono font-bold text-primary-600",children:j(w)}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Time Elapsed"})]}),"COMPLETED"===h.status&&h.startedAt&&h.completedAt&&(0,a.jsxs)("div",{className:"mt-6",children:[a.jsx("div",{className:"text-3xl font-mono font-bold text-green-600",children:j(Math.floor((new Date(h.completedAt).getTime()-new Date(h.startedAt).getTime())/1e3))}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Total Duration"})]})]})})}),a.jsx("div",{className:"px-4 flex-1",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6 space-y-4",children:[a.jsx("h3",{className:"font-semibold text-gray-800",children:"Wash Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-500",children:"Location"}),a.jsx("span",{className:"font-medium text-gray-800",children:h.location?.name||h.locationId.slice(0,8)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-500",children:"Service"}),a.jsx("span",{className:"font-medium text-gray-800",children:h.servicePackage?.name||h.servicePackageId.slice(0,8)})]}),h.tractorPlateManual&&(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-500",children:"Tractor Plate"}),a.jsx("span",{className:"font-medium text-gray-800 font-mono",children:h.tractorPlateManual})]}),h.trailerPlateManual&&(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-500",children:"Trailer Plate"}),a.jsx("span",{className:"font-medium text-gray-800 font-mono",children:h.trailerPlateManual})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-500",children:"Created"}),a.jsx("span",{className:"font-medium text-gray-800",children:new Date(h.createdAt).toLocaleTimeString()})]}),h.startedAt&&(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-500",children:"Started"}),a.jsx("span",{className:"font-medium text-gray-800",children:new Date(h.startedAt).toLocaleTimeString()})]}),h.completedAt&&(0,a.jsxs)("div",{className:"flex justify-between items-center py-2",children:[a.jsx("span",{className:"text-gray-500",children:"Completed"}),a.jsx("span",{className:"font-medium text-gray-800",children:new Date(h.completedAt).toLocaleTimeString()})]})]})]})}),(0,a.jsxs)("div",{className:"px-4 py-6 space-y-3 safe-area-bottom",children:[("CREATED"===h.status||"AUTHORIZED"===h.status)&&a.jsx("button",{onClick:v,disabled:p,className:"w-full py-4 bg-gradient-to-r from-green-500 to-green-700 text-white font-semibold rounded-xl shadow-lg hover:from-green-600 hover:to-green-800 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:p?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Starting..."]}):(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Start Wash"]})}),"IN_PROGRESS"===h.status&&a.jsx("button",{onClick:N,disabled:p,className:"w-full py-4 bg-gradient-to-r from-primary-500 to-primary-700 text-white font-semibold rounded-xl shadow-lg hover:from-primary-600 hover:to-primary-800 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:p?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Completing..."]}):(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Complete Wash"]})}),"COMPLETED"===h.status&&(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Wash Completed!"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Great job! You can start a new wash."}),a.jsx("button",{onClick:k,className:"px-8 py-3 bg-primary-600 text-white font-semibold rounded-xl hover:bg-primary-700 active:scale-[0.98] transition-all",children:"Back to Dashboard"})]})]})]})}},8069:(e,s,t)=>{"use strict";t.d(s,{h:()=>n});let a=process.env.NEXT_PUBLIC_API_URL||"";class r{constructor(){this.baseUrl=a}handleSessionError(e){400===e.status||e.status}async activate(e,s){let t=await fetch(`${this.baseUrl}/pwa/activate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inviteCode:e,pin:s})});if(!t.ok)throw Error((await t.json()).message||"Activation failed");return t.json()}async getProfile(e){let s=await fetch(`${this.baseUrl}/pwa/profile`,{headers:{"x-driver-session":e}});if(!s.ok)throw Error("Failed to get profile");return s.json()}async getLocations(e){let s=await fetch(`${this.baseUrl}/pwa/locations`,{headers:{"x-driver-session":e}});if(!s.ok)throw this.handleSessionError(s),Error("Failed to get locations");return s.json()}async getLocationByCode(e,s){let t=await fetch(`${this.baseUrl}/pwa/locations/${s}`,{headers:{"x-driver-session":e}});if(!t.ok)throw Error("Location not found");return t.json()}async getServices(e,s){let t=await fetch(`${this.baseUrl}/pwa/locations/${s}/services`,{headers:{"x-driver-session":e}});if(!t.ok)throw Error("Failed to get services");let a=await t.json();return a.services||a}async createWashEvent(e,s){let t=await fetch(`${this.baseUrl}/pwa/wash-events`,{method:"POST",headers:{"Content-Type":"application/json","x-driver-session":e},body:JSON.stringify(s)});if(!t.ok)throw Error((await t.json()).message||"Failed to create wash event");return t.json()}async startWashEvent(e,s){let t=await fetch(`${this.baseUrl}/pwa/wash-events/${s}/start`,{method:"POST",headers:{"x-driver-session":e}});if(!t.ok)throw Error((await t.json()).message||"Failed to start wash");return t.json()}async completeWashEvent(e,s){let t=await fetch(`${this.baseUrl}/pwa/wash-events/${s}/complete`,{method:"POST",headers:{"x-driver-session":e}});if(!t.ok)throw Error((await t.json()).message||"Failed to complete wash");return t.json()}async getActiveWashEvent(e){let s=await fetch(`${this.baseUrl}/pwa/wash-events/active`,{headers:{"x-driver-session":e}});if(404===s.status)return null;if(!s.ok)throw Error("Failed to get active wash event");return s.json()}async getWashEvent(e,s){let t=await fetch(`${this.baseUrl}/pwa/wash-events/${s}`,{headers:{"x-driver-session":e}});if(!t.ok)throw Error((await t.json()).message||"Failed to get wash event");return t.json()}async getWashHistory(e){let s=await fetch(`${this.baseUrl}/pwa/wash-events`,{headers:{"x-driver-session":e}});if(!s.ok)throw Error("Failed to get wash history");let t=await s.json();return t.data||t}}let n=new r},2029:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o,metadata:()=>r,viewport:()=>n});var a=t(9510);t(5023);let r={title:"VSys Wash",description:"Truck wash management system",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:"VSys Wash"}},n={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,themeColor:"#2563eb"};function o({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:"min-h-screen bg-gray-50",children:e})})}},164:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/Users/hollosigabor/Downloads/NewvSys/pwa/src/app/wash/[id]/page.tsx#default`)},5023:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[819],()=>t(7776));module.exports=a})();